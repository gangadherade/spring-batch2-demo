@Component
public class TimeRestrictionFilter implements Filter {

    private static final LocalTime START_TIME = LocalTime.of(9, 0);
    private static final LocalTime END_TIME = LocalTime.of(13, 0);

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        LocalTime now = LocalTime.now();
        if (now.isAfter(START_TIME) && now.isBefore(END_TIME)) {
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            httpResponse.setStatus(HttpStatus.FORBIDDEN.value());
            return;
        }
        chain.doFilter(request, response);
    }
}

@Configuration
public class AppConfig {

    @Bean
    public FilterRegistrationBean<TimeRestrictionFilter> timeRestrictionFilterRegistration() {
        FilterRegistrationBean<TimeRestrictionFilter> registration = new FilterRegistrationBean<>();
        registration.setFilter(new TimeRestrictionFilter());
        registration.addUrlPatterns("/my-endpoint/*"); // Replace with your endpoint URL pattern
        return registration;
    }
}# spring-batch2-demo
-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
-- ROLLBACK;
BEGIN;


CREATE TABLE IF NOT EXISTS public."APPENDIXA_REQUEST"
(
    arq_id uuid,
    arq_request_id character varying,
    arq_request_type uuid,
    arq_processing_status uuid,
    arq_start_timestamp timestamp with time zone,
    arq_end_timestamp timestamp with time zone,
    arq_created_by character varying,
    arq_modified_by character varying,
    arq_created_timestamp timestamp with time zone,
    arq_modified_timestamp timestamp with time zone,
    CONSTRAINT arq_id_pk PRIMARY KEY (arq_id),
    CONSTRAINT "arq-request_id_unique" UNIQUE (arq_request_id)
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_REQUEST_TYPE"
(
    art_id uuid,
    art_request_type_code character varying,
    art_request_type_description character varying,
    CONSTRAINT art_id_pk PRIMARY KEY (art_id)
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_STN_PRODUCT_REQUEST"
(
    bpr_request_id uuid,
    bpr_stn_id uuid,
    bpr_product_id character varying
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_STN_PARAMETERS"
(
    asp_id uuid,
    asp_request_id uuid,
    asp_batch_id character varying,
    asp_stn character varying,
    asp_category character varying,
    asp_subcategory character varying,
    asp_input_product_count integer,
    asp_created_by character varying,
    asp_modified_by character varying,
    asp_created_timestamp timestamp with time zone,
    asp_modified_timestamp timestamp with time zone,
    CONSTRAINT asp_id_pk PRIMARY KEY (asp_id),
    CONSTRAINT asp_batch_id_unique UNIQUE (asp_batch_id, asp_stn, asp_category, asp_subcategory)
);

CREATE TABLE IF NOT EXISTS public."APPPENDIXA_BUNDLE_PARAMETERS"
(
    abp_id uuid,
    abp_request_id uuid,
    abp_bundle_name character varying NOT NULL,
    abp_category character varying,
    abp_subcategory character varying,
    abp_product_count integer,
    abp_created_by character varying,
    abp_modified_by character varying,
    abp_created_timestamp timestamp with time zone,
    abp_modified_timestamp timestamp with time zone,
    CONSTRAINT abp_id_pk PRIMARY KEY (abp_id),
    CONSTRAINT abp_bundle_name_unique UNIQUE (abp_bundle_name, abp_category, abp_subcategory, abp_request_id)
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_NOTIFICATION"
(
    anf_id uuid,
    anf_request_id uuid,
    anf_notification_file_reference character varying,
    CONSTRAINT anf_id_pk PRIMARY KEY (anf_id)
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_PROCESSING_STATUS"
(
    aps_id uuid,
    aps_processing_status_code character varying,
    aps_processing_status_name character varying,
    CONSTRAINT aps_id_pk PRIMARY KEY (aps_id)
);

CREATE TABLE IF NOT EXISTS public."APPENDIXA_BATCH"
(
    abt_id character varying,
    abt_batch_id character varying,
    abt_request_id uuid,
    abt_processing_status uuid,
    abt_output_file_reference uuid,
    abt_category character varying,
    abt_subcategory character varying,
    abt_output_count integer,
    arq_start_timestamp timestamp with time zone,
    arq_end_timestamp timestamp with time zone,
    arq_created_by character varying,
    arq_modified_by character varying,
    arq_created_timestamp timestamp with time zone,
    arq_modified_timestamp timestamp with time zone,
    CONSTRAINT abt_id_pk PRIMARY KEY (abt_id),
    CONSTRAINT abt_batch_id_unique UNIQUE (abt_batch_id, abt_category, abt_subcategory)
);

ALTER TABLE IF EXISTS public."APPENDIXA_REQUEST"
    ADD CONSTRAINT appendixa_request_type_fk FOREIGN KEY (arq_request_type)
    REFERENCES public."APPENDIXA_REQUEST_TYPE" (art_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_REQUEST"
    ADD CONSTRAINT appendixa_request_processing_status_fk FOREIGN KEY (arq_processing_status)
    REFERENCES public."APPENDIXA_PROCESSING_STATUS" (aps_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_STN_PRODUCT_REQUEST"
    ADD CONSTRAINT bpr_request_id_fk FOREIGN KEY (bpr_request_id)
    REFERENCES public."APPENDIXA_REQUEST" (arq_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_STN_PRODUCT_REQUEST"
    ADD CONSTRAINT bpr_stn_id_fk FOREIGN KEY (bpr_stn_id)
    REFERENCES public."APPENDIXA_STN_PARAMETERS" (asp_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_STN_PARAMETERS"
    ADD CONSTRAINT asp_id_fk FOREIGN KEY (asp_request_id)
    REFERENCES public."APPENDIXA_REQUEST" (arq_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPPENDIXA_BUNDLE_PARAMETERS"
    ADD CONSTRAINT abp_request_id_fk FOREIGN KEY (abp_request_id)
    REFERENCES public."APPENDIXA_REQUEST" (arq_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_NOTIFICATION"
    ADD CONSTRAINT anf_request_id_fk FOREIGN KEY (anf_request_id)
    REFERENCES public."APPENDIXA_REQUEST" (arq_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."APPENDIXA_BATCH"
    ADD CONSTRAINT appendix_batch_request_id_pk FOREIGN KEY (abt_request_id)
    REFERENCES public."APPENDIXA_REQUEST" (arq_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;
